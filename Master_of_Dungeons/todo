MASTER OF DUNGEONS TODO LIST (82% Progress)
When this list is complete/empty and extensive testing and bugfixing has been done, bump to version 1.0
Each top level point removed yields 2% completion.

 (1) Inventory Containers
     * Interaction
       * Make interaction (e.g. with shops) a menu item instead of part of Unit Commands so it's more discoverable.
       * When ambiguous (interacting with adjacent tile instead of with tile you're on) let players choose which unit interacts.
       * Give to adjacent unit.
         * Inventory
         * Gold (if leader)
         * Gold coins (item) if not leader (anyone should be able to hold them, but only leader should be able to use them)

     * There are several allowed shop actions.
       * Host-only:
         * Alter stock of each item in a shop (number input).
         * Include stock templates for various levels of advancement so shop can be populated quickly.
       * Any unit on hex:
         * Buy items from shops.
         * Sell items to shop (math.floor(0.8 * cost)).

    * The host needs to be able to alter stock of each item in a container (number input).

 (1b) Inventory Containers II
       * Host shop configurations.
         * Make a shop not able to buy items.
         * Change shop buy percentage multiplier
         * Change shop price multiplier

       * When a container has its last item removed:
         * A pack is removed from the map automatically if it is emptied by a player.
         * An empty chest is has an open chest image until an item is put in it again.

       * Players should be able to add to and take from containers more than one at a time.

       * When a unit with inventory dies, its inventory is automatically dropped into a newly created leather pack container.
         * If it dies on a hex with an existing pack, the items are added to the pack's items.
         * If it dies on a hex with a gold pile, the gold pile is replaced by a pack and the gold is added to the pack.
         * If it dies on a hex with a shop, the inventory is added to the shop! Be careful!
         * If it dies on a hex with a chest, the inventory is added to the chest, even if it is locked. Be careful!

       * Players need to be able to remove from packs.

 (2) Inventory
     (a) Haste potion.
         * Extra melee strike, +2 total moves.
         * Small = 2 turns, Medium = 4 turns.
         * Multiple potions stack the turn duration, not the effect strength.

     (b) Ale.
         * "Confidence" ability: +5 max HP for 3 turns.
         * 25% chance of also becoming drunk (berserk melee) for that duration
         * More ale stacks the turn duration, not the effect strength, but the 25% chance of berserk melee is on applying each ale.
         * Perhaps un-marskman all marksman attacks for that duration too.

     (c) Implement effects for the scrolls.
         * Gain wisdom (experience)
         * Radius healing (everything on one side within some radius for some amount of HP)
         * Summon <type> (enables you to summon for one turn and then disables summoning)
         * Flight (allows a temporary flying movetype)
         * Teleportation (used twice, the first remembers a spot and then second teleports you back there)
         * Faerie fire (one turn)
         * Fireball (one turn)

     (d) Implement equipment.
         * Using the item equips it into an equipment spot.
         * Unequipping it is possible from its own menu.
         * When the unit dies, all equipment is dropped with inventory.
           * Unless that unit is turned into a zombie with plague.
         * When equipping an item to a spot that already has something, the old equipment is automatically unequipped.
         * Certain units (e.g. wolves) can't equip things.

 (3) Upgrades
     * Include the following possible advancements:
       * + 1 movement (cost: 3, cap: 2)
       * + 3 hitpoints (cost: 1)
       * + 1 to melee attacks' damage (cost: 2, increases by 1 each time)
       * + 1 to range attacks' damage (cost: 2, increases by 1 each time)
         * Restrict to units with non-temporary range attack.
       * - 20% XP to next promotion (cost: 2, cap: 2)

 (4) Miscellaneous
     * Make the host modification/management of units more powerful.
       * Handle negative numbers in inventory properly.
       * Let the host be able to see players' units' inventory.
       * Toggle the boss healthy/regenerate on/off.
         * Perhaps give bosses extra traits so this doesn't break.

     * Getting units to the game.
       * Add a way to control the recalling of units and recall lists.
         * Prevent the traditional keep-and-gold recalling of units.
         * Make sure that NPCs/enemies can be recalled, not just player summons.

     * Implement additional objects on maps:
       * teleporters (very high priority for large maps!!!)
       * traps (damage and/or status modifier on touching a hex)
       * doors (instead of manually removing walls)
       * keys/locks for doors/chests/etc.

 (4b) Details
     * DungeonOpt
       * Write a method for handling text_input
         * Add a cancel option to text stuff (speaking, transforming unit, etc.).
       * Rewrite to handle the extra filters and other things that prevent all files from using DungeonOpt.
       * Add helper functions for more option/menu functions than just options_list_short()
       * Make the toggle <foo> in settings say what the current state is.

     * Existing issues.
       * Handle Add to Chest when you have no inventory.
       * Fix icon size for Summon <foo> and Summon Summoner.
       * Fix deprecated code when Lua warnings pop up.
       * Let people choose their own unit type in the intro screen if they're a peasant instead of relying on transform.
       * Have the host restrict what's possible (level, etc.)
       * If a unit is transformed to Undead and then to something else they stay Undead in their traits.
       * Fix changing summoner role when cancelling.
       * Block right click menu items on map border because they cause unpredictable bugs.
       * Fix the changing objectives so that it works again.
         * Have the new interface change subsections (victory, loss, etc.) instead of the whole thing so that formatting can be preserved.

     * Terrains.
       * Make sure new 1.10 and 1.12 terrains are in the game.
       * Add repeat last overlay.
       * Fix remove overlay.
       * Fix some bridges and other broken overlays.
       * Test all terrains/overlays over again.
       * All terrains/overlays/etc. available in-game should be usable in MoD.
       * Move a lot of terrains into overlays only (villages, forests, etc.)

    * Summoners.
       * Make sure all units in the game are a summoner or a summoned unit.
       * Add a toggleable default summoner gender for when two genders are possible for summoners so it doesn't always default to male.
       * Add preset super summoners for the late game when people have strong units, and to make high-level summons accessible.
       * Reduce max HP on summoner by 1 per level of active summoned unit?

     * Rewrite the older parts of the MoD code.
       * Make sure that it's in three layers: pseudo-libraries, core MoD action functions, and data/config files.
       * Make sure that all reasonable things that can be modified in Lua and/or WML are available to host menus.
         * Allow modifying attacks and traits if possible.

(5) Future
    * Have game options allow other methods of summoning than just HP deduction.
    * Have dynamic_difficulty() working and optionally use it to scale the HP and damage of units spawned by player 1.
    * Resurrection.
      * When units die they are saved in a resurrection table.
      * The host can resurrect a unit. (rematches of old bosses?)
      * A resurrection spell on a scroll should be able to resurrect a unit too.
    * Allow the placement of any unit instantly via textbox like Transform.
      * Make sure they're loyal like summoned units.
    * Allow import of units saved in persistant variables. (Across scenarios? Is this Change Unit > Save?)
    * Allow the saving of items (in chests/shops too?), etc., across scenarios in a campaign.
    * Story-important, unsellable items.
